<div class="container-fluid matcha-profile">
	<div class="profile-header">

		<div class="header-picture" style="background-image : url('{{user.photos.cover}}');">
			<span id="btn-cover" class="btn btn-warning btn-sm btn-file">
				<span class="glyphicon glyphicon-picture" aria-hidden="true"></span> &nbsp;Change cover <input type="file">
			</span>
		</div>

		<div class="profile-picture">
			<div id="profile-pic" class="profile img-circle" style="background-image : url('{{user.photos.profile}}');"></div>
		</div>
		<div class="main-infos">
			<h2 id="first-last"><span id="user-first">{{user.infos.firstname}}</span> <span id="user-last">{{user.infos.lastname}}</span> &nbsp;<button id="edit-first-last" type="button" class="btn btn-warning btn-xs"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit</button></h2>
			<form id="form-first-last" class="hidden">
				<div class="input-group input-group-sm">
					<input id="first-input" type="text" class="form-control form-dual" value="{{user.infos.firstname}}" placeholder="First Name">
					<input id="last-input" type="text" class="form-control form-dual" value="{{user.infos.lastname}}" placeholder="Last Name">
					<span class="input-group-btn">
						<button id="change-first-last" class="btn btn-warning" type="button">Change</button>
					</span>
				</div><!-- /input-group -->
			</form>
			<h5 id="mail" class="text-muted"><span class="glyphicon glyphicon-envelope" aria-hidden="true"></span> <span id="user-mail">{{user.account.mail}}</span> &nbsp; <button id="edit-mail" type="button" class="btn btn-warning btn-xs"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit</button></h5>
			<form id="form-mail" class="hidden">
				<div class="input-group input-group-sm">
					<input id="mail-input" type="text" class="form-control" value="{{user.account.mail}}" placeholder="Mail">
					<span class="input-group-btn">
						<button id="change-mail" class="btn btn-warning" type="button">Change</button>
					</span>
				</div><!-- /input-group -->
			</form>
		</div>

		<ul class="nav nav-tabs menu-profile">
			<li role="presentation" class="active"><a href="#About">About</a></li>
			<li role="presentation"><a href="#Photos">Photos</a></li>
			<li role="presentation"><a href="#Reports">Reported users</a></li>
		</ul>
	</div>

	<div class="row profile-timeline tab-menu" id="tab-about">
		<div class="col-md-5 about-me">
			<div class="btn-group actions" role="group" aria-label="...">
				<button type="button" class="btn btn-default disabled"><span class="glyphicon glyphicon-heart-empty" aria-hidden="true"></span> <span class="badge">{{ likes }}</span></button>
				<a href="/user/{{user._id}}" class="btn btn-default" role="button"><span class="glyphicon glyphicon-user" aria-hidden="true"></span></a>
				<button type="button" class="btn btn-default disabled"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></button>
			</div>

			<div class="panel panel-warning">
				<div class="panel-heading"><h3 class="panel-title">Biography</h3><button type="button" id="btn-edit-bio" class="btn btn-warning btn-xs"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit</button></div>
				<div class="panel-body">
					<div id="bio-area-edit" class="form-group hidden">
						<textarea class="form-control" rows="5" id="textarea-bio">{{user.infos.biography}}</textarea>
						<button id="bio-area-button" type="button" class="btn btn-warning btn-sm"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Submit my new biography</button>
					</div>
					<span id="span-bio">{{user.infos.biography}}</span>
				</div>
			</div>

			<div class="panel panel-warning">
				<div class="panel-heading"><h3 class="panel-title">Location</h3><button type="button" id="update-location" class="btn btn-warning btn-xs"><span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> Update</button></div>
				<div class="panel-body">
					<h5 id="location"><span class="glyphicon glyphicon-map-marker" aria-hidden="true"></span> <span id="span-location">
						{{#if user.location}}
							{{#if user.location.address}}
								{{user.location.address}}
							{{else}}
								{{user.location.city}}, {{user.location.country}}
							{{/if}}
						{{else}}
							No location found, please update...
						{{/if}}
					</h5>
					<img id="geo-map" src="" class="hidden" data-latitude="{{user.location.latitude}}" data-longitude="{{user.location.longitude}}" />
				</div>
			</div>





		</div>
		<div class="col-md-7 details">
			<div class="panel panel-warning">
				<div class="panel-heading"><h3 class="panel-title">Details</h3></div>
				<div class="panel-body">
					<table class="table table-hover">
						<thead>
							<tr>
								<th>Popularity</th>
								<th id="popularity">93%</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<th scope="row">Connected</th>
								<td id="connected"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span> No</td>
							</tr>
							<tr>
								<th scope="row">Birthdate</th>
								<td>{{user.infos.birthdate}}</td>
							</tr>
							<tr>
								<th scope="row">Age</th>
								<td>{{age}} years old</td>
							</tr>
							<tr>
								<th scope="row">Sex</th>
								<td>
									<span id="sex"><span id="span-sex">{{user.infos.sex}}</span> &nbsp;<button id="edit-sex" type="button" class="btn btn-warning btn-xs"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit</button></span>

									<form id="form-sex" class="hidden">
										<div class="input-group input-group-sm">
											<span class="input-group-addon">
												<input class="gender-input" type="radio" name="gender" value="Male">
												Male
											</span>
											<span class="input-group-addon">
												<input class="gender-input" type="radio" name="gender" value="Female">
												Female
											</span>
											<span class="input-group-addon">
												<input class="gender-input" type="radio" name="gender" value="Other">
												Other
											</span>
											<span class="input-group-btn">
												<button id="select-sex" class="btn btn-warning" type="button">Select</button>
											</span>
										</div><!-- /input-group -->
									</form>
								</td>
							</tr>
							<tr>
								<th scope="row">Orientation</th>
								<td>
									<span id="orientation"><span id="span-orientation">{{user.infos.orientation}}</span> &nbsp;<button id="edit-orientation" type="button" class="btn btn-warning btn-xs"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit</button></span>

									<form class="hidden" id="form-orientation">
										<div class="input-group input-group-sm">
											<span class="input-group-addon">
												<input class="orientation-input" type="radio" name="orientation" value="Bisexual">
												Bisexual
											</span>
											<span class="input-group-addon">
												<input class="orientation-input" type="radio" name="orientation" value="Straight">
												Straight
											</span>
											<span class="input-group-addon">
												<input class="orientation-input" type="radio" name="orientation" value="Gay">
												Gay
											</span>
											<span class="input-group-btn">
												<button id="select-orientation" class="btn btn-warning" type="button">Select</button>
											</span>
										</div><!-- /input-group -->
									</form>

								</td>
							</tr>
							<tr>
								<th scope="row">Interests</th>
								<td><span id="interests">
									{{#each user.interests}}
										<button type="button" class="btn btn-warning btn-xs btn-tag"><span class="glyphicon glyphicon-tag" aria-hidden="true"></span> <span class="span-interest">{{this}}</span></button>
									{{/each}}
									</span>
									<span id="add-interest" class="glyphicon glyphicon-plus-sign text-yellow" aria-hidden="true"></span>

									<form id="form-interests" class="hidden">
										<div class="input-group input-group-sm">
											<input list="list-interests" type="text" class="form-control input-interest" placeholder="New interest">
											<datalist id="list-interests"></datalist>
											<span class="input-group-btn">
												<button id="new-interest" class="btn btn-warning" type="button"><span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span></button>
											</span>
										</div><!-- /input-group -->
									</form>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>

			<div class="panel panel-warning">
				<div class="panel-heading"><h3 class="panel-title">Recently visited</h3></div>
				<div class="panel-body">
					<div class="row">
						<div class="col-md-4 col-xs-4">
							<div class="thumbnail hidden" id="visit0">
								<a href="#"><div class="img"></div></a>
								<div class="caption">
									<h5></h5>
									<p><span class="glyphicon glyphicon-map-marker" aria-hidden="true"></span> <span class="location"></span></p>
								</div>
							</div>
						</div>
						<div class="col-md-4 col-xs-4">
							<div class="thumbnail hidden" id="visit1">
								<a href="#"><div class="img"></div></a>
								<div class="caption">
									<h5></h5>
									<p><span class="glyphicon glyphicon-map-marker" aria-hidden="true"></span> <span class="location"></span></p>
								</div>
							</div>
						</div>
						<div class="col-md-4 col-xs-4">
							<div class="thumbnail hidden" id="visit2">
								<a href="#"><div class="img"></div></a>
								<div class="caption">
									<h5></h5>
									<p><span class="glyphicon glyphicon-map-marker" aria-hidden="true"></span> <span class="location"></span></p>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="panel panel-warning">
				<div class="panel-heading"><h3 class="panel-title">Recently liked you</h3></div>
				<div class="panel-body">
					<div class="row">
						<div class="col-md-4 col-xs-4">
							<div class="thumbnail hidden" id="like0">
								<a href="#"><div class="img"></div></a>
								<div class="caption">
									<h5></h5>
									<p><span class="glyphicon glyphicon-map-marker" aria-hidden="true"></span> <span class="location"></span></p>
								</div>
							</div>
						</div>
						<div class="col-md-4 col-xs-4">
							<div class="thumbnail hidden" id="like1">
								<a href="#"><div class="img"></div></a>
								<div class="caption">
									<h5></h5>
									<p><span class="glyphicon glyphicon-map-marker" aria-hidden="true"></span> <span class="location"></span></p>
								</div>
							</div>
						</div>
						<div class="col-md-4 col-xs-4">
							<div class="thumbnail hidden" id="like2">
								<a href="#"><div class="img"></div></a>
								<div class="caption">
									<h5></h5>
									<p><span class="glyphicon glyphicon-map-marker" aria-hidden="true"></span> <span class="location"></span></p>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="row photos-tab tab-menu hidden" id="tab-photos">
		<div class="col-md-12">
			<div class="panel panel-warning" id="panel-photos">
				<div class="panel-heading"><h3 class="panel-title">My pictures</h3></div>
				<div class="panel-body">
					<div class="row">

						{{#each gallery}}

						<div class="blk-photo col-md-4 col-xs-12">
							<div class="thumbnail" id="{{@key}}">
								<div class="img" style="background-image : url('{{this}}');"></div>
								<div class="caption">
									<div class="btn-group" role="group" aria-label="...">
										<span class="btn btn-warning btn-sm btn-file change-photo">
											<span class="glyphicon glyphicon-picture" aria-hidden="true"></span> Change<input type="file" data-index="{{@key}}">
										</span>
										<button data-index="{{@key}}" type="button" class="btn btn-warning btn-sm make-default"><span class="glyphicon glyphicon-user" aria-hidden="true"></span> Default</button>
										<button type="button" data-index="{{@key}}" class="btn btn-default btn-sm delete-photo"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span> Delete</button>
									</div>
								</div>
							</div>
						</div>

						{{/each}}

					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="row reports-tab tab-menu hidden" id="tab-report">
		<div class="col-md-12">
			<div class="panel panel-warning" id="panel-reports">
				<div class="panel-heading"><h3 class="panel-title">Reported users</h3></div>
				<div class="panel-body">
					<div class="row">

						{{#each user.reports}}

						<div class="col-md-3atch col-xs-4">
							<div class="thumbnail" id="report{{@key}}">
								<a href="#"><div class="img"></div></a>
								<div class="caption">
									<h5>{{this}}</h5>
									<p><span class="glyphicon glyphicon-map-marker" aria-hidden="true"></span> <span class="location"></span></p>
								</div>
							</div>
						</div>

						{{/each}}

					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<script type="text/javascript" src="/js/gmaps.min.js"></script>
<script type="text/javascript" src="/js/profile.js"></script>
